<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <title>Registration page</title>
</head>
<body>
<div>
    <h2>Registration</h2>
</div>
<div><label> User Name : <input type="text" id="username"/> </label></div>
<div><label> Password: <input type="password" id="password"/> </label></div>
<div><input type="submit" value="Register" id="regButton"/></div>

<script>
    let username = document.getElementById("username");
    let password = document.getElementById("password");
    document.getElementById("regButton").onclick = function (e) {
        let xhr = new XMLHttpRequest();
        xhr.open("POST", "/api/registration?username=" + username.value + "&password=" + password.value, false);
        xhr.send();
        let res = JSON.parse(xhr.responseText);
        if (res.success === false) {
            alert(res.error);
            e.preventDefault();
        } else {
            window.location.replace("/login");
        }
    }
</script>
</body>
</html>